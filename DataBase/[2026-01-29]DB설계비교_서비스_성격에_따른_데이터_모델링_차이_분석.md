#  서비스별 DB 설계 비교 분석 (Facebook vs Instagram)

단순한 기능 구현을 넘어, 각 서비스가 지향하는 가치와 비즈니스 로직이 데이터베이스 설계에 어떻게 반영되는지 심층적으로 분석했습니다.

---

## 1. 관계의 형태: 쌍방향(Mutual) vs 단방향(One-way)
* **Facebook (`friendship`)**: '친구'라는 결속력을 중시하는 **쌍방향** 관계입니다. 상호 수락 절차가 필수적이므로 `status` 컬럼(대기, 수락, 거절)을 통해 관계의 상태를 관리하는 로직이 핵심입니다.
* **Instagram (`follow`)**: '관심사' 중심의 **단방향** 구독 관계입니다. 별도의 수락 절차 없이 일방적인 연결이 가능하도록 설계하여 사용자 간 상호작용의 허들을 낮췄습니다.

## 2. 미디어 관리: 단일(1:1) vs 다중(1:N)
* **Facebook (`post`)**: 텍스트와 담론 중심의 서비스로, 초기 설계 시 게시물 하나에 미디어가 종속되는 **1:1 형태**를 채택하여 구조적 단순함을 유지했습니다.
* **Instagram (`feed_image`)**: 비주얼 중심 서비스의 정체성을 반영했습니다. 한 게시물에 여러 장의 사진(슬라이드)을 포함할 수 있도록 `Feed`와 `FeedImage` 테이블을 분리한 **1:N 구조**를 구축했습니다.

## 3. 성능 최적화: 정규화(Standard) vs 역정규화(Performance)
* **Facebook**: 데이터 중복을 최소화하고 데이터 간의 일관성과 정확성을 유지하는 **정규화(Normalization)** 원칙에 충실합니다.
* **Instagram (`like_count`)**: 폭발적인 '좋아요' 조회 트래픽을 감당하기 위한 설계입니다. 매번 대량의 데이터를 `JOIN`하여 개수를 계산하는 대신, `Feed` 테이블에 `like_count` 컬럼을 직접 관리하는 **역정규화(Denormalization)**를 통해 사용자 체감 속도(F5)를 극대화했습니다.

## 4. 부가 기능: 커뮤니티 vs 개인 편의성
* **Facebook (`comment`)**: 게시물을 매개체로 한 사용자 간의 활발한 소통과 **커뮤니티 형성**에 초점을 맞춘 설계입니다.
* **Instagram (`bookmark`, `block`)**: 개인의 취향을 기록하는 **북마크** 기능과 프라이버시 및 공간 보호를 위한 **차단(Block)** 시스템을 독립 테이블로 설계하여 개인화된 경험을 강화했습니다.

---

##  설계 비교 요약표

| 비교 항목 | Facebook (관계 중심) | Instagram (미디어/성능 중심) |
| :--- | :--- | :--- |
| **핵심 관계** | 쌍방향 친구 (Mutual) | 단방향 팔로우 (One-way) |
| **데이터 구조** | 정규화 지향 (Data Integrity) | 역정규화 활용 (Performance) |
| **미디어 확장성** | 게시물당 단일 미디어 중심 | 게시물당 다중 미디어(1:N) |