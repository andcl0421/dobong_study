#  FastAPI 기반 상품 및 게시판 도메인 설계 실습

> **작성일: 2026-02-03**

##  학습 목표
- FastAPI의 `APIRouter`를 활용한 도메인별 엔드포인트 분리
- Pydantic 모델을 이용한 데이터 검증 및 객체 지향적 설계
- Python 모듈 시스템(Import) 및 HTTP 상태 코드(405)의 이해

---

##  비즈니스 로직 및 설계 핵심 포인트

### 1. 도메인 주도 설계를 위한 구조화
단일 파일에 모든 기능을 넣지 않고, 상품(`Product`)과 게시글(`Post`)을 별도의 파일로 분리하여 유지보수성을 높였습니다. 
- **Router 활용**: `prefix`와 `tags`를 설정하여 API 문서(Swagger)에서 도메인별로 그룹화되도록 설계했습니다.

### 2. Pydantic을 활용한 데이터 무결성 확보
- `ProductCreate`와 `PostCreate` 모델을 통해 클라이언트로부터 들어오는 데이터의 형식을 강제합니다.
- 비전공자 신입 개발자가 흔히 하는 실수인 '데이터 형식 오류'를 프레임워크 수준에서 방지합니다.

### 3. In-Memory 데이터 관리
- 실제 DB 연결 전, Python의 `list`와 `global` 카운터를 활용하여 서버 메모리상에서 CRUD(생성, 조회, 수정, 삭제)가 작동하는 원리를 구현했습니다.

---

##  구현 예시 코드

### [Product API 설계]
변수명은 실무 표준인 `Snake Case`를 적용하였으며, 명확한 의미 전달을 위해 `products_db`와 같은 이름을 제안하여 반영했습니다.

````python
from fastapi import APIRouter
from product import Product, ProductCreate

router = APIRouter(prefix="/products", tags=["product"])

products_db = []
current_id = 0

@router.post("")
def create_product(product_in: ProductCreate):
    global current_id
    current_id += 1
    
    # 새로운 상품 객체 생성 및 ID 부여
    new_product = Product(
        product_id=current_id, 
        product_name=product_in.product_name, 
        price=product_in.price
    )
    
    products_db.append(new_product)
    return {"message": "상품 등록 완료", "data": new_product}

@router.get("")
def get_all_products():
    return products_db


